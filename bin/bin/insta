#!/bin/bash

# Make directory if it doesn't exist
mkdir -p $HOME/Downloads/ig

DIR=$HOME/Downloads/ig

# make newlines the only separator
IFS=$'\n' 

# Loop
for i in $(cat < "$HOME/.ig_subs.txt"); do
	instalooter user $i $DIR -v -d -n 1 -N -T {username}.{date}.{id} 
done

for i in $DIR/*json ; do
	cat $i | jq '(.owner.full_name + " (" + .owner.username + "): " + .edge_media_to_caption[][][].text)'
done > $DIR/description.txt

sed -i 'G' $DIR/description.txt

rm $HOME/Downloads/ig/*.json


